(function(b){
/*
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var a;(function(c){if(typeof module!=="undefined"){module.exports=c}else{if(typeof define==="function"){define(c)}else{a=c}}}(function(){var C={};C.name="mustache.js";C.version="0.5.1-dev";C.tags=["{{","}}"];C.parse=q;C.clearCache=A;C.compile=j;C.compilePartial=m;C.render=B;C.Scanner=x;C.Context=u;C.Renderer=v;C.to_html=function(H,F,G,I){var E=B(H,F,G);if(typeof I==="function"){I(E)}else{return E}};var e=/\s*/;var o=/\s+/;var k=/\S/;var i=/\s*=/;var r=/\s*\}/;var w=/#|\^|\/|>|\{|&|=|!/;function s(F,E){return RegExp.prototype.test.call(F,E)}function h(E){return !s(k,E)}var l=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"};var n=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm;function z(F){var E=F.replace(n,function(G){return"\\u"+("0000"+G.charCodeAt(0).toString(16)).slice(-4)});return'"'+E+'"'}function g(E){return E.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function p(E){return String(E).replace(/[&<>"'\/]/g,function(F){return d[F]})}C.isWhitespace=h;C.isArray=l;C.quote=z;C.escapeRe=g;C.escapeHtml=p;function x(E){this.string=E;this.tail=E;this.pos=0}x.prototype.eos=function(){return this.tail===""};x.prototype.scan=function(F){var E=this.tail.match(F);if(E&&E.index===0){this.tail=this.tail.substring(E[0].length);this.pos+=E[0].length;return E[0]}return null};x.prototype.scanUntil=function(F){var E,G=this.tail.search(F);switch(G){case -1:E=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:E=null;break;default:E=this.tail.substring(0,G);this.tail=this.tail.substring(G);this.pos+=G}return E};function u(E,F){this.view=E;this.parent=F;this.clearCache()}u.make=function(E){return(E instanceof u)?E:new u(E)};u.prototype.clearCache=function(){this._cache={}};u.prototype.push=function(E){return new u(E,this)};u.prototype.lookup=function(E){var H=this._cache[E];if(!H){if(E==="."){H=this.view}else{var G=this;while(G){if(E.indexOf(".")>0){var I=E.split("."),F=0;H=G.view;while(H&&F<I.length){H=H[I[F++]]}}else{H=G.view[E]}if(H!=null){break}G=G.parent}}this._cache[E]=H}if(typeof H==="function"){H=H.call(this.view)}return H};function v(){this.clearCache()}v.prototype.clearCache=function(){this._cache={};this._partialCache={}};v.prototype.compile=function(H,F){if(typeof H==="string"){H=q(H,F)}var G=f(H),E=this;return function(I){return G(u.make(I),E)}};v.prototype.compilePartial=function(F,G,E){this._partialCache[F]=this.compile(G,E);return this._partialCache[F]};v.prototype.render=function(G,E){var F=this._cache[G];if(!F){F=this.compile(G);this._cache[G]=F}return F(E)};v.prototype._section=function(E,F,M){var L=F.lookup(E);switch(typeof L){case"object":if(l(L)){var H="";for(var I=0,K=L.length;I<K;++I){H+=M(F.push(L[I]),this)}return H}return L?M(F.push(L),this):"";case"function":var G=M(F,this),N=this;var J=function(O){return N.render(O,F)};return L.call(F.view,G,J)||"";default:if(L){return M(F,this)}}return""};v.prototype._inverted=function(E,F,H){var G=F.lookup(E);if(G==null||G===false||(l(G)&&G.length===0)){return H(F,this)}return""};v.prototype._partial=function(E,F){var G=this._partialCache[E];if(G){return G(F,this)}return""};v.prototype._name=function(F,G,H){var I=G.lookup(F);if(typeof I==="function"){I=I.call(G.view)}var E=(I==null)?"":String(I);if(H){return p(E)}return E};function f(J,K){var F=['""'];var H,L,I;for(var G=0,E=J.length;G<E;++G){H=J[G];switch(H.type){case"#":case"^":L=(H.type==="#")?"_section":"_inverted";F.push("r."+L+"("+z(H.value)+", c, function (c, r) {\n  "+f(H.tokens,true)+"\n})");break;case"{":case"&":case"name":I=H.type==="name"?"true":"false";F.push("r._name("+z(H.value)+", c, "+I+")");break;case">":F.push("r._partial("+z(H.value)+", c)");break;case"text":F.push(z(H.value));break}}F="return "+F.join(" + ")+";";if(K){return F}return new Function("c, r",F)}function t(E){if(E.length===2){return[new RegExp(g(E[0])+"\\s*"),new RegExp("\\s*"+g(E[1]))]}throw new Error("Invalid tags: "+E.join(" "))}function D(J){var E=[];var I=E;var K=[];var G,H;for(var F=0;F<J.length;++F){G=J[F];switch(G.type){case"#":case"^":G.tokens=[];K.push(G);I.push(G);I=G.tokens;break;case"/":if(K.length===0){throw new Error("Unopened section: "+G.value)}H=K.pop();if(H.value!==G.value){throw new Error("Unclosed section: "+H.value)}if(K.length>0){I=K[K.length-1].tokens}else{I=E}break;default:I.push(G)}}H=K.pop();if(H){throw new Error("Unclosed section: "+H.value)}return E}function c(H){var E;for(var G=0;G<H.length;++G){var F=H[G];if(E&&E.type==="text"&&F.type==="text"){E.value+=F.value;H.splice(G--,1)}else{E=F}}}function q(P,R){R=R||C.tags;var Q=t(R);var G=new x(P);var N=[],L=[],J=false,S=false;var E=function(){if(J&&!S){while(L.length){N.splice(L.pop(),1)}}else{L=[]}J=false;S=false};var M,O,H;while(!G.eos()){O=G.scanUntil(Q[0]);if(O){for(var I=0,K=O.length;I<K;++I){H=O.charAt(I);if(h(H)){L.push(N.length)}else{S=true}N.push({type:"text",value:H});if(H==="\n"){E()}}}if(!G.scan(Q[0])){break}J=true;M=G.scan(w)||"name";G.scan(e);if(M==="="){O=G.scanUntil(i);G.scan(i);G.scanUntil(Q[1])}else{if(M==="{"){var F=new RegExp("\\s*"+g("}"+R[1]));O=G.scanUntil(F);G.scan(r);G.scanUntil(Q[1])}else{O=G.scanUntil(Q[1])}}if(!G.scan(Q[1])){throw new Error("Unclosed tag at "+G.pos)}N.push({type:M,value:O});if(M==="name"||M==="{"||M==="&"){S=true}if(M==="="){R=O.split(o);Q=t(R)}}c(N);return D(N)}var y=new v();function A(){y.clearCache()}function j(F,E){return y.compile(F,E)}function m(F,G,E){return y.compilePartial(F,G,E)}function B(H,E,G){if(G){for(var F in G){m(F,G[F])}}return y.render(H,E)}return C}()));b.mustache=function(e,c,d){return a.render(e,c,d)};b.fn.mustache=function(c,d){return b(this).map(function(f,h){var g=b(h).html().trim();var e=b.mustache(g,c,d);return b(e).get()})}})(jQuery);